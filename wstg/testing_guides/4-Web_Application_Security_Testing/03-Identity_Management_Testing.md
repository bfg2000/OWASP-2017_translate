### 03-Identity_Management_Testing - Тестирование управлением идентификации

### 4.3.1 Test Role Definitions - Описание тестовых ролей

<ins>Резюме</ins><br>
Приложения имеют несколько типов функций и служб, и для них требуются разрешения на доступ в зависимости от потребностей пользователя. 
Этим пользователем может быть:
- администратор, где он управляет функциями приложения.
- аудитор, где он проверяет транзакции приложения и предоставляют подробный отчет.
- инженер службы поддержки, где они помогают клиентам отлаживать и устранять проблемы в их учетных записях.
- клиент, где они взаимодействуют с приложением и получают выгоду от его услуг.

Для обработки этих видов использования и любых других вариантов использования этого приложения устанавливаются определения ролей (более известные как RBAC). На основе этих ролей пользователь может выполнить требуемую задачу.

<ins>Задачи теста</ins>
Определите и задокументируйте роли, используемые приложением.
Попытайтесь переключиться, изменить или получить доступ к другой роли.
Проверьте степень детализации ролей и потребности в предоставленных разрешениях.

<ins>Как протестировать</ins>
Идентификация ролей
Тестировщик должен начать с определения тестируемых ролей приложения любым из следующих методов:
- Документация по применению.
- Рекомендации разработчиков или администраторов приложения.
- Комментарии к приложению.

Возможные роли:
- переменная cookie (например, role = admin, isAdmin = True)
- переменная аккаунта (например, роль: менеджер)
- скрытые каталоги или файлы (например, /admin, /mod, /backups)
- переключение на хорошо известных пользователей (например, администратор, резервные копии и т. д.)
- переключение на доступные роли

После определения возможных векторов атаки тестировщику необходимо протестировать и подтвердить, что они могут получить доступ к доступным ролям.
Некоторые приложения определяют роли пользователя при создании, посредством строгих проверок и политик или путем обеспечения надлежащей защиты роли пользователя с помощью подписи, созданной серверной частью. Обнаружение того, что роли существуют, не означает, что они уязвимы.

<ins>Просмотр разрешений ролей</ins>
После получения доступа к ролям в системе тестировщик должен понимать разрешения, предоставленные каждой роли.
- Инженер службы поддержки не должен иметь возможность выполнять административные функции, управлять резервным копированием или проводить какие-либо транзакции вместо пользователя.
- Администратор не должен иметь полных полномочий в системе. Чувствительные функции администратора должны основываться на принципе производителя и проверки или использовать MFA, чтобы гарантировать, что администратор проводит транзакцию. Ярким примером этого стал инцидент с Twitter в 2020 году.

<ins>инструменты</ins>
Вышеупомянутые тесты могут проводиться без использования каких-либо инструментов, кроме того, который используется для доступа к системе.

Чтобы упростить задачу и сделать ее более документированной, можно использовать:
- Расширение Burp's Autorize
- Надстройка ZAP для тестирования контроля доступа


### 4.3.2 Test User Registration Process

<ins>Резюме</ins>
Некоторые веб-сайты предлагают процесс регистрации пользователей, который автоматизирует (или полуавтоматизирует) предоставление пользователям доступа к системе. Требования к идентификации для доступа варьируются от положительной идентификации до отсутствия вообще, в зависимости от требований безопасности системы. Многие общедоступные приложения полностью автоматизируют процесс регистрации и инициализации, поскольку размер пользовательской базы делает невозможным управление вручную. Однако многие корпоративные приложения инициализируют пользователей вручную, поэтому этот тестовый пример может не применяться.

<ins>Задачи теста</ins>
Убедитесь, что требования к идентификации для регистрации пользователей соответствуют бизнес-требованиям и требованиям безопасности.
Подтвердите процесс регистрации.

<ins>Как протестировать</ins>
Убедитесь, что требования к идентификации для регистрации пользователей соответствуют бизнес-требованиям и требованиям безопасности:
- Кто-нибудь может зарегистрироваться для доступа?
- Проверяются ли регистрации человеком перед инициализацией или они предоставляются автоматически при соблюдении критериев?
- Может ли одно и то же лицо или личность регистрироваться несколько раз?
- Могут ли пользователи регистрироваться для разных ролей или разрешений?
- Какое удостоверение личности требуется для успешной регистрации?
- Проверяются ли зарегистрированные личности?

Подтвердите процесс регистрации:
- Можно ли легко подделать или подделать идентификационную информацию?
- Можно ли манипулировать обменом идентификационной информацией во время регистрации?

<ins>ПРИМЕР</ins>
В приведенном ниже примере WordPress единственное требование к идентификации - это адрес электронной почты, доступный регистранту.
![Image alt](https://github.com/bfg2000/OWASP-2017_translate/blob/main/wstg/testing_guides/4-Web_Application_Security_Testing/images/4-3-2-1.jpg)



4.3.3 Test Account Provisioning Process

4.3.4 Testing for Account Enumeration and Guessable User Account

4.3.5 Testing for Weak or Unenforced Username Policy
